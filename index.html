<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Macbeth vs Banquo Essay Planning</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { 
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    body { 
      margin: 0; 
      font-family: Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overscroll-behavior: none;
    }
    button, .draggable, .droppable {
      touch-action: manipulation;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    .draggable:active {
      opacity: 0.7;
    }
    @media (hover: none) and (pointer: coarse) {
      button {
        min-height: 48px;
        min-width: 48px;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // Icon components
    const GripVertical = () => (
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="9" cy="12" r="1"/><circle cx="9" cy="5" r="1"/><circle cx="9" cy="19" r="1"/>
        <circle cx="15" cy="12" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="19" r="1"/>
      </svg>
    );

    const ArrowLeft = ({ size = 18 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/>
      </svg>
    );

    const ArrowRight = ({ size = 18 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
      </svg>
    );

    const ChevronDown = ({ size = 20 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="6 9 12 15 18 9"/>
      </svg>
    );

    const ChevronUp = ({ size = 20 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <polyline points="18 15 12 9 6 15"/>
      </svg>
    );

    const CheckCircle = ({ size = 20 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10"/>
        <polyline points="9 12 11 14 15 10"/>
      </svg>
    );

    const XCircle = ({ size = 20 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="15" y1="9" x2="9" y2="15"/>
        <line x1="9" y1="9" x2="15" y2="15"/>
      </svg>
    );

    const PlanningTemplate = () => {
      const [currentPage, setCurrentPage] = useState(0);
      const [droppedItems, setDroppedItems] = useState({
        intro: Array(3).fill(null),
        sim1: Array(5).fill(null),
        sim2: Array(5).fill(null),
        diff1: Array(5).fill(null),
        diff2: Array(5).fill(null)
      });
      const [selectedItem, setSelectedItem] = useState(null);
      const [showOptions, setShowOptions] = useState(false);
      const [windowWidth, setWindowWidth] = useState(window.innerWidth);

      React.useEffect(() => {
        const handleResize = () => setWindowWidth(window.innerWidth);
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
      }, []);

      const pages = [
        {
          title: "Introduction Planning",
          isIntro: true,
          paragraphs: [
            { id: 'intro', label: 'Build Your Introduction' }
          ],
          dragOptions: [
            // OPENING SENTENCES (5 options - jumbled, 2 wrong, 3 varying quality)
            { id: 'i2', text: 'Macbeth is a play written by William Shakespeare about two Scottish thanes.', type: 'opening', color: '#5D1D2E', correct: false },
            { id: 'i1', text: 'In Shakespeare\'s tragedy Macbeth, the contrasting fates of Macbeth and Banquo reveal the power of moral choice when faced with supernatural temptation.', type: 'opening', color: '#5D1D2E', correct: true },
            { id: 'i4', text: 'In the play Macbeth, Shakespeare explores the characters Macbeth and Banquo and their different responses to the witches.', type: 'opening', color: '#5D1D2E', correct: 'partial' },
            { id: 'i3', text: 'This essay will compare and contrast Macbeth and Banquo.', type: 'opening', color: '#5D1D2E', correct: false },
            { id: 'i5', text: 'William Shakespeare\'s Macbeth presents two characters, Macbeth and Banquo, who face similar prophecies but make different choices.', type: 'opening', color: '#5D1D2E', correct: 'partial' },
            
            // SUMMARY OF CONTENTS (4 options - jumbled)
            { id: 'i7', text: 'There are many similarities and differences between the two characters.', type: 'summary', color: '#BF9A4A', correct: false },
            { id: 'i6', text: 'This essay will examine their similarities as brave warriors and loyal thanes, as well as their contrasting responses to the witches\' prophecies and the resulting moral choices each man makes.', type: 'summary', color: '#BF9A4A', correct: true },
            { id: 'i9', text: 'Both characters start as soldiers, but one becomes evil while the other stays good.', type: 'summary', color: '#BF9A4A', correct: false },
            { id: 'i8', text: 'This essay will discuss their shared military background and their different reactions to prophecy.', type: 'summary', color: '#BF9A4A', correct: 'partial' },
            
            // THESIS STATEMENTS (4 options - jumbled)
            { id: 'i11', text: 'Macbeth and Banquo are both important characters who make different choices.', type: 'thesis', color: '#2C3E50', correct: false },
            { id: 'i10', text: 'While both men start as honorable warriors who receive similar prophecies, their different responses reveal that moral character, not circumstance or destiny, determines one\'s fate.', type: 'thesis', color: '#2C3E50', correct: true },
            { id: 'i13', text: 'In conclusion, the two characters are very different from each other in many ways.', type: 'thesis', color: '#2C3E50', correct: false },
            { id: 'i12', text: 'Although both men are warriors, Macbeth\'s ambition leads him to murder while Banquo remains loyal.', type: 'thesis', color: '#2C3E50', correct: 'partial' }
          ]
        },
        {
          title: "Similarities Between Macbeth and Banquo",
          paragraphs: [
            { id: 'sim1', label: 'Similarity 1: Both are warriors and loyal thanes' },
            { id: 'sim2', label: 'Similarity 2: Both encounter the supernatural prophecies' }
          ],
          dragOptions: [
            // POINT options for both paragraphs (jumbled)
            { id: 's11', text: 'Both characters are ambitious men who want advancement in Duncan\'s court.', type: 'point', color: '#5D1D2E' },
            { id: 's1', text: 'Both Macbeth and Banquo start the play as brave warriors. They are loyal to King Duncan and serve him through military service.', type: 'point', color: '#5D1D2E' },
            { id: 's6', text: 'Both Macbeth and Banquo receive prophecies from the weird sisters. These prophecies offer them glimpses of future power.', type: 'point', color: '#5D1D2E' },
            
            // EVIDENCE (MACBETH) options (jumbled)
            { id: 's2', text: 'Macbeth is called "valour\'s minion" and defeats the traitor Macdonwald in battle.', type: 'evidence-m', color: '#BF9A4A' },
            { id: 's11a', text: 'The witches vanish and "what seemed corporal melted, as breath into the wind."', type: 'evidence-m', color: '#BF9A4A' },
            { id: 's7', text: 'Macbeth is told "All hail, Macbeth, that shalt be King hereafter!" He becomes "rapt" with this possibility.', type: 'evidence-m', color: '#BF9A4A' },
            
            // EVIDENCE (BANQUO) options (jumbled)
            { id: 's8', text: 'Banquo is told "Thou shalt get kings, though thou be none." This means his descendants will be kings.', type: 'evidence-b', color: '#C49A6C' },
            { id: 's3', text: 'Banquo fights alongside Macbeth and is also praised for his courage in defending Scotland.', type: 'evidence-b', color: '#C49A6C' },
            
            // EXPLANATION options (jumbled)
            { id: 's9', text: 'Both men receive supernatural knowledge about their futures. This puts them in the same situation where they must choose how to respond to temptation.', type: 'explain', color: '#2C3E50' },
            { id: 's4', text: 'This shared beginning shows that both men start as honorable warriors with similar status. This makes their different choices later in the play more important.', type: 'explain', color: '#2C3E50' },
            
            // LINK options (jumbled)
            { id: 's10', text: 'By giving both characters similar prophecies, Shakespeare shows that character is the main factor that determines their different fates.', type: 'link', color: '#8E44AD' },
            { id: 's5', text: 'Shakespeare uses this similarity to show that a person\'s character is determined by their choices, not by their starting position in life.', type: 'link', color: '#8E44AD' }
          ]
        },
        {
          title: "Differences Between Macbeth and Banquo",
          paragraphs: [
            { id: 'diff1', label: 'Difference 1: Response to the prophecies' },
            { id: 'diff2', label: 'Difference 2: Moral integrity under temptation' }
          ],
          dragOptions: [
            // POINT options (jumbled)
            { id: 'd6', text: 'Under the pressure of temptation and opportunity, Macbeth\'s morality collapses. However, Banquo\'s integrity remains firm.', type: 'point', color: '#5D1D2E' },
            { id: 'd1', text: 'Macbeth and Banquo respond to the witches\' prophecies in very different ways. This reveals their contrasting characters.', type: 'point', color: '#5D1D2E' },
            
            // EVIDENCE (MACBETH) options (jumbled)
            { id: 'd11', text: 'Macbeth receives the title of Thane of Cawdor. This seems to confirm the witches\' prophecy.', type: 'evidence-m', color: '#BF9A4A' },
            { id: 'd2', text: 'Macbeth becomes obsessed with the prophecy. He later admits his "vaulting ambition" is his only motivation for murdering Duncan.', type: 'evidence-m', color: '#BF9A4A' },
            { id: 'd7', text: 'Macbeth descends into tyranny and becomes a murderer. By the play\'s end, even Lady Macbeth cannot chastise or control him.', type: 'evidence-m', color: '#BF9A4A' },
            { id: 'd12', text: 'Duncan is described as a "peerless" king. This makes his murder even more terrible.', type: 'evidence-m', color: '#BF9A4A' },
            
            // EVIDENCE (BANQUO) options (jumbled)
            { id: 'd8', text: 'Banquo, despite similar temptations, prays "restrain in me the cursed thoughts that nature gives way to in repose." He actively fights against evil impulses.', type: 'evidence-b', color: '#C49A6C' },
            { id: 'd3', text: 'Banquo immediately warns that "the instruments of darkness tell us truths, win us with honest trifles, to betray us in deepest consequence."', type: 'evidence-b', color: '#C49A6C' },
            
            // EXPLANATION options (jumbled)
            { id: 'd9', text: 'Macbeth\'s moral deterioration transforms him from an honored thane to a "dismal" tyrant. Banquo dies with his honor intact. This demonstrates the power of moral choice.', type: 'explain', color: '#2C3E50' },
            { id: 'd4', text: 'Macbeth allows the prophecy to awaken his ambition and drive him to murder. However, Banquo recognizes the danger and remains skeptical of supernatural forces.', type: 'explain', color: '#2C3E50' },
            
            // LINK options (jumbled)
            { id: 'd10', text: 'Shakespeare uses this difference to argue that true nobility does not come from rank or prophecy. It comes from the moral decisions people make when faced with temptation.', type: 'link', color: '#8E44AD' },
            { id: 'd5', text: 'This contrast shows that temptation alone does not determine a person\'s actions. Internal character decides whether someone gives in to or resists evil.', type: 'link', color: '#8E44AD' }
          ]
        }
      ];

      const peelLabels = ['Point', 'Evidence (Macbeth)', 'Evidence (Banquo)', 'Explanation', 'Link'];
      const introLabels = ['Opening Sentence', 'Summary of Contents', 'Thesis Statement'];

      // Validation function
      const isCorrectPlacement = (item, paragraphId, index) => {
        if (!item) return null;
        
        // For introduction page
        if (paragraphId === 'intro') {
          const expectedTypes = ['opening', 'summary', 'thesis'];
          return item.type === expectedTypes[index] && item.correct === true;
        }
        
        // For body paragraphs
        const expectedTypes = ['point', 'evidence-m', 'evidence-b', 'explain', 'link'];
        return item.type === expectedTypes[index];
      };

      const getBoxColor = (item, paragraphId, index) => {
        if (!item) return '#f8f9fa';
        
        const isCorrect = isCorrectPlacement(item, paragraphId, index);
        if (isCorrect === true) return '#d4edda'; // Light green
        if (isCorrect === false) return '#f8d7da'; // Light red
        return '#fff';
      };

      const getBorderColor = (item, paragraphId, index) => {
        if (!item) return selectedItem ? '3px dashed #5D1D2E' : '3px dashed #ccc';
        
        const isCorrect = isCorrectPlacement(item, paragraphId, index);
        if (isCorrect === true) return '3px solid #28a745'; // Green
        if (isCorrect === false) return '3px solid #dc3545'; // Red
        return `3px solid ${item.color}`;
      };

      const handleDragStart = (e, item) => {
        e.dataTransfer.setData('item', JSON.stringify(item));
      };

      const handleDrop = (e, paragraphId, index) => {
        e.preventDefault();
        const item = JSON.parse(e.dataTransfer.getData('item'));
        
        setDroppedItems(prev => {
          const newItems = { ...prev };
          newItems[paragraphId] = [...prev[paragraphId]];
          newItems[paragraphId][index] = item;
          return newItems;
        });
      };

      const handleDragOver = (e) => {
        e.preventDefault();
      };

      const handleItemClick = (item) => {
        if (selectedItem?.id === item.id) {
          setSelectedItem(null);
        } else {
          setSelectedItem(item);
        }
      };

      const handleSlotClick = (paragraphId, index) => {
        if (selectedItem) {
          setDroppedItems(prev => {
            const newItems = { ...prev };
            newItems[paragraphId] = [...prev[paragraphId]];
            newItems[paragraphId][index] = selectedItem;
            return newItems;
          });
          setSelectedItem(null);
          if (windowWidth < 1025) {
            setShowOptions(false);
          }
        }
      };

      const removeItem = (paragraphId, index) => {
        setDroppedItems(prev => {
          const newItems = { ...prev };
          newItems[paragraphId] = [...prev[paragraphId]];
          newItems[paragraphId][index] = null;
          return newItems;
        });
      };

      const currentPageData = pages[currentPage];
      const isMobile = windowWidth < 768;
      const isTablet = windowWidth >= 768 && windowWidth < 1025;

      return (
        <div style={{ 
          width: '100%', 
          minHeight: '100vh', 
          background: 'linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)',
          padding: isMobile ? '15px 10px' : '20px 15px',
          fontFamily: 'Arial, sans-serif'
        }}>
          <div style={{ maxWidth: '1400px', margin: '0 auto' }}>
            {/* Header */}
            <div style={{ textAlign: 'center', marginBottom: isMobile ? '20px' : '30px' }}>
              <h1 style={{ 
                fontSize: isMobile ? '22px' : isTablet ? '28px' : '32px', 
                color: '#5D1D2E', 
                marginBottom: '10px',
                fontWeight: 'bold',
                lineHeight: '1.2'
              }}>
                Macbeth vs Banquo Essay Planning
              </h1>
              <h2 style={{ 
                fontSize: isMobile ? '16px' : isTablet ? '18px' : '20px', 
                color: '#BF9A4A', 
                marginBottom: '10px',
                lineHeight: '1.3'
              }}>
                {currentPageData.title}
              </h2>
              <p style={{ 
                fontSize: isMobile ? '13px' : '15px', 
                color: '#555', 
                lineHeight: '1.4',
                padding: '0 10px'
              }}>
                {isMobile || isTablet ? 'Tap to select, then tap a box to place' : 'Drag items into the correct boxes'}
              </p>
              {!currentPageData.isIntro && (
                <p style={{ 
                  fontSize: isMobile ? '12px' : '14px', 
                  color: '#666', 
                  lineHeight: '1.4',
                  padding: '5px 10px',
                  fontStyle: 'italic'
                }}>
                  Hint: Each paragraph needs Point → Evidence (Macbeth) → Evidence (Banquo) → Explanation → Link
                </p>
              )}
              {currentPageData.isIntro && (
                <p style={{ 
                  fontSize: isMobile ? '12px' : '14px', 
                  color: '#666', 
                  lineHeight: '1.4',
                  padding: '5px 10px',
                  fontStyle: 'italic'
                }}>
                  Hint: Choose the best opening sentence, summary, and thesis statement
                </p>
              )}
              {selectedItem && (
                <div style={{
                  marginTop: '15px',
                  padding: '10px 15px',
                  background: '#fff',
                  borderRadius: '8px',
                  border: `3px solid ${selectedItem.color}`,
                  display: 'inline-block',
                  boxShadow: '0 4px 8px rgba(0,0,0,0.2)',
                  maxWidth: '90%'
                }}>
                  <div style={{ fontSize: '11px', color: '#555', marginBottom: '4px' }}>Selected item</div>
                </div>
              )}
            </div>

            {/* Mobile/Tablet: Toggle Options Button */}
            {(isMobile || isTablet) && (
              <div style={{ marginBottom: '20px' }}>
                <button
                  onClick={() => setShowOptions(!showOptions)}
                  style={{
                    width: '100%',
                    padding: '15px',
                    fontSize: isMobile ? '15px' : '16px',
                    background: '#5D1D2E',
                    color: '#fff',
                    border: 'none',
                    borderRadius: '8px',
                    cursor: 'pointer',
                    fontWeight: 'bold',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: '10px',
                    boxShadow: '0 2px 4px rgba(0,0,0,0.2)',
                    minHeight: '48px',
                    touchAction: 'manipulation'
                  }}
                >
                  {showOptions ? 'Hide Options' : 'Show Available Options'}
                  {showOptions ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
                </button>
              </div>
            )}

            {/* Main Content */}
            <div style={{ 
              display: (isMobile || isTablet) ? 'block' : 'flex',
              gap: '30px'
            }}>
              {/* Available Options - Mobile/Tablet */}
              {(isMobile || isTablet) && showOptions && (
                <div style={{ marginBottom: '25px' }}>
                  <div style={{ 
                    background: '#fff',
                    borderRadius: '12px',
                    padding: isMobile ? '15px' : '20px',
                    boxShadow: '0 4px 12px rgba(0,0,0,0.15)'
                  }}>
                    <h3 style={{ 
                      fontSize: isMobile ? '16px' : '18px', 
                      color: '#5D1D2E', 
                      marginBottom: '12px',
                      fontWeight: 'bold'
                    }}>
                      Available Options
                    </h3>
                    <div style={{ 
                      fontSize: isMobile ? '11px' : '12px', 
                      color: '#666',
                      marginBottom: '12px',
                      padding: '8px',
                      background: '#f8f9fa',
                      borderRadius: '6px'
                    }}>
                      {currentPageData.isIntro ? 
                        'Options are grouped and color-coded by type. Choose the best one from each group!' : 
                        'Options are grouped by paragraph component. Match each to the correct box!'
                      }
                    </div>
                    {currentPageData.isIntro && (
                      <h4 style={{ 
                        fontSize: isMobile ? '13px' : '14px',
                        color: '#5D1D2E',
                        margin: '0 0 10px 0',
                        fontWeight: 'bold',
                        borderBottom: '2px solid #5D1D2E',
                        paddingBottom: '4px'
                      }}>Opening Sentences</h4>
                    )}
                    {!currentPageData.isIntro && (
                      <h4 style={{ 
                        fontSize: isMobile ? '13px' : '14px',
                        color: '#5D1D2E',
                        margin: '0 0 10px 0',
                        fontWeight: 'bold',
                        borderBottom: '2px solid #5D1D2E',
                        paddingBottom: '4px'
                      }}>Point Sentences</h4>
                    )}
                    {currentPageData.dragOptions.map((option, idx) => {
                      const showSummaryHeader = currentPageData.isIntro && option.type === 'summary' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'summary');
                      const showThesisHeader = currentPageData.isIntro && option.type === 'thesis' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'thesis');
                      
                      const showEvidenceMHeader = !currentPageData.isIntro && option.type === 'evidence-m' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'evidence-m');
                      const showEvidenceBHeader = !currentPageData.isIntro && option.type === 'evidence-b' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'evidence-b');
                      const showExplainHeader = !currentPageData.isIntro && option.type === 'explain' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'explain');
                      const showLinkHeader = !currentPageData.isIntro && option.type === 'link' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'link');
                      
                      return (
                        <React.Fragment key={option.id}>
                          {showSummaryHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#BF9A4A',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #BF9A4A',
                              paddingBottom: '4px'
                            }}>Summary of Contents</h4>
                          )}
                          {showThesisHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#2C3E50',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #2C3E50',
                              paddingBottom: '4px'
                            }}>Thesis Statements</h4>
                          )}
                          {showEvidenceMHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#BF9A4A',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #BF9A4A',
                              paddingBottom: '4px'
                            }}>Evidence (Macbeth)</h4>
                          )}
                          {showEvidenceBHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#C49A6C',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #C49A6C',
                              paddingBottom: '4px'
                            }}>Evidence (Banquo)</h4>
                          )}
                          {showExplainHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#2C3E50',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #2C3E50',
                              paddingBottom: '4px'
                            }}>Explanation</h4>
                          )}
                          {showLinkHeader && (
                            <h4 style={{ 
                              fontSize: isMobile ? '13px' : '14px',
                              color: '#8E44AD',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #8E44AD',
                              paddingBottom: '4px'
                            }}>Link Sentences</h4>
                          )}
                          <div
                            onClick={() => handleItemClick(option)}
                            className="draggable"
                            style={{
                              background: selectedItem?.id === option.id ? option.color + '20' : '#f8f9fa',
                              border: selectedItem?.id === option.id ? `3px solid ${option.color}` : `2px solid ${option.color}`,
                              borderRadius: '8px',
                              padding: isMobile ? '12px' : '14px',
                              marginBottom: '10px',
                              cursor: 'pointer',
                              transition: 'all 0.2s',
                              transform: selectedItem?.id === option.id ? 'scale(1.02)' : 'scale(1)',
                              minHeight: '48px',
                              WebkitTapHighlightColor: 'transparent',
                              position: 'relative'
                            }}
                          >
                            <div style={{
                              position: 'absolute',
                              top: '8px',
                              right: '8px',
                              background: option.color,
                              color: '#fff',
                              borderRadius: '50%',
                              width: isMobile ? '28px' : '32px',
                              height: isMobile ? '28px' : '32px',
                              display: 'flex',
                              alignItems: 'center',
                              justifyContent: 'center',
                              fontWeight: 'bold',
                              fontSize: isMobile ? '12px' : '14px'
                            }}>
                              {idx + 1}
                            </div>
                            <div style={{ fontSize: isMobile ? '12px' : '13px', color: '#333', lineHeight: '1.4', paddingRight: '40px' }}>
                              {option.text}
                            </div>
                          </div>
                        </React.Fragment>
                      );
                    })}
                  </div>
                </div>
              )}

              {/* Drop Zones */}
              <div style={{ flex: (isMobile || isTablet) ? '1' : '2' }}>
                {currentPageData.paragraphs.map((para, paraIndex) => (
                  <div key={para.id} style={{ marginBottom: isMobile ? '25px' : '30px' }}>
                    <h3 style={{ 
                      fontSize: isMobile ? '15px' : isTablet ? '17px' : '18px', 
                      color: '#5D1D2E', 
                      marginBottom: '12px',
                      padding: isMobile ? '10px' : '12px',
                      background: '#fff',
                      borderRadius: '8px',
                      boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
                      fontWeight: 'bold',
                      lineHeight: '1.3'
                    }}>
                      {currentPageData.isIntro ? para.label : `Paragraph ${currentPage * 2 + paraIndex}: ${para.label}`}
                    </h3>
                    
                    <div style={{ 
                      display: currentPageData.isIntro ? 'flex' : 'grid',
                      flexDirection: currentPageData.isIntro ? 'column' : undefined,
                      gridTemplateColumns: currentPageData.isIntro ? undefined : (isMobile ? '1fr' : 'repeat(2, 1fr)'),
                      gap: isMobile ? '10px' : '12px'
                    }}>
                      {droppedItems[para.id].map((item, index) => (
                        <div
                          key={index}
                          className="droppable"
                          onDrop={(e) => handleDrop(e, para.id, index)}
                          onDragOver={handleDragOver}
                          onClick={() => {
                            if (item) {
                              removeItem(para.id, index);
                            } else {
                              handleSlotClick(para.id, index);
                            }
                          }}
                          style={{
                            background: getBoxColor(item, para.id, index),
                            border: getBorderColor(item, para.id, index),
                            borderRadius: '8px',
                            padding: isMobile ? '12px' : '14px',
                            minHeight: currentPageData.isIntro ? (isMobile ? '100px' : '120px') : (isMobile ? '100px' : '110px'),
                            display: 'flex',
                            flexDirection: 'column',
                            cursor: 'pointer',
                            transition: 'all 0.3s',
                            boxShadow: item ? '0 4px 6px rgba(0,0,0,0.1)' : 'none',
                            gridColumn: (!currentPageData.isIntro && index === 4) ? (isMobile ? 'auto' : 'span 2') : 'auto',
                            WebkitTapHighlightColor: 'transparent',
                            touchAction: 'manipulation'
                          }}
                        >
                          {item ? (
                            <>
                              <div style={{ 
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center',
                                marginBottom: '6px'
                              }}>
                                <div style={{ 
                                  fontSize: isMobile ? '11px' : '13px', 
                                  fontWeight: 'bold', 
                                  color: '#5D1D2E'
                                }}>
                                  {currentPageData.isIntro ? introLabels[index] : peelLabels[index]}
                                </div>
                                {isCorrectPlacement(item, para.id, index) === true && (
                                  <div style={{ color: '#28a745' }}>
                                    <CheckCircle size={isMobile ? 20 : 24} />
                                  </div>
                                )}
                                {isCorrectPlacement(item, para.id, index) === false && (
                                  <div style={{ color: '#dc3545' }}>
                                    <XCircle size={isMobile ? 20 : 24} />
                                  </div>
                                )}
                              </div>
                              <div style={{ 
                                fontSize: isMobile ? '12px' : '13px', 
                                color: '#333', 
                                flex: 1, 
                                lineHeight: '1.4' 
                              }}>
                                {item.text}
                              </div>
                              <div style={{ 
                                fontSize: '10px', 
                                color: '#999', 
                                marginTop: '6px',
                                fontStyle: 'italic'
                              }}>
                                Tap to remove
                              </div>
                            </>
                          ) : (
                            <>
                              <div style={{ 
                                fontSize: isMobile ? '11px' : '13px', 
                                fontWeight: 'bold', 
                                color: '#5D1D2E',
                                marginBottom: '6px'
                              }}>
                                {currentPageData.isIntro ? introLabels[index] : peelLabels[index]}
                              </div>
                              <div style={{ 
                                color: '#999', 
                                fontSize: isMobile ? '12px' : '13px',
                                textAlign: 'center',
                                margin: 'auto'
                              }}>
                                {selectedItem ? 'Tap to place here' : 'Empty'}
                              </div>
                            </>
                          )}
                        </div>
                      ))}
                    </div>
                  </div>
                ))}
              </div>

              {/* Desktop Options Panel */}
              {!isMobile && !isTablet && (
                <div style={{ flex: '1' }}>
                  <div style={{ 
                    position: 'sticky', 
                    top: '20px',
                    background: '#fff',
                    borderRadius: '12px',
                    padding: '20px',
                    boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
                    maxHeight: '80vh',
                    overflowY: 'auto'
                  }}>
                    <h3 style={{ 
                      fontSize: '18px', 
                      color: '#5D1D2E', 
                      marginBottom: '20px',
                      fontWeight: 'bold'
                    }}>
                      Available Options
                    </h3>
                    <div style={{ 
                      fontSize: '12px', 
                      color: '#666',
                      marginBottom: '15px',
                      padding: '10px',
                      background: '#f8f9fa',
                      borderRadius: '6px'
                    }}>
                      {currentPageData.isIntro ? 
                        'Options are grouped and color-coded by type. Choose the best one from each group!' : 
                        'Options are grouped by paragraph component. Match each to the correct box!'
                      }
                    </div>
                    {currentPageData.isIntro && (
                      <h4 style={{ 
                        fontSize: '14px',
                        color: '#5D1D2E',
                        margin: '0 0 10px 0',
                        fontWeight: 'bold',
                        borderBottom: '2px solid #5D1D2E',
                        paddingBottom: '4px'
                      }}>Opening Sentences</h4>
                    )}
                    {!currentPageData.isIntro && (
                      <h4 style={{ 
                        fontSize: '14px',
                        color: '#5D1D2E',
                        margin: '0 0 10px 0',
                        fontWeight: 'bold',
                        borderBottom: '2px solid #5D1D2E',
                        paddingBottom: '4px'
                      }}>Point Sentences</h4>
                    )}
                    {currentPageData.dragOptions.map((option, idx) => {
                      const showSummaryHeader = currentPageData.isIntro && option.type === 'summary' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'summary');
                      const showThesisHeader = currentPageData.isIntro && option.type === 'thesis' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'thesis');
                      
                      const showEvidenceMHeader = !currentPageData.isIntro && option.type === 'evidence-m' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'evidence-m');
                      const showEvidenceBHeader = !currentPageData.isIntro && option.type === 'evidence-b' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'evidence-b');
                      const showExplainHeader = !currentPageData.isIntro && option.type === 'explain' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'explain');
                      const showLinkHeader = !currentPageData.isIntro && option.type === 'link' && 
                        (idx === 0 || currentPageData.dragOptions[idx - 1].type !== 'link');
                      
                      return (
                        <React.Fragment key={option.id}>
                          {showSummaryHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#BF9A4A',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #BF9A4A',
                              paddingBottom: '4px'
                            }}>Summary of Contents</h4>
                          )}
                          {showThesisHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#2C3E50',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #2C3E50',
                              paddingBottom: '4px'
                            }}>Thesis Statements</h4>
                          )}
                          {showEvidenceMHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#BF9A4A',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #BF9A4A',
                              paddingBottom: '4px'
                            }}>Evidence (Macbeth)</h4>
                          )}
                          {showEvidenceBHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#C49A6C',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #C49A6C',
                              paddingBottom: '4px'
                            }}>Evidence (Banquo)</h4>
                          )}
                          {showExplainHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#2C3E50',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #2C3E50',
                              paddingBottom: '4px'
                            }}>Explanation</h4>
                          )}
                          {showLinkHeader && (
                            <h4 style={{ 
                              fontSize: '14px',
                              color: '#8E44AD',
                              margin: '15px 0 10px 0',
                              fontWeight: 'bold',
                              borderBottom: '2px solid #8E44AD',
                              paddingBottom: '4px'
                            }}>Link Sentences</h4>
                          )}
                          <div
                            draggable
                            className="draggable"
                            onDragStart={(e) => handleDragStart(e, option)}
                            style={{
                              background: '#f8f9fa',
                              border: `2px solid ${option.color}`,
                              borderRadius: '8px',
                              padding: '14px',
                              marginBottom: '10px',
                              cursor: 'grab',
                              transition: 'all 0.2s',
                              minHeight: '48px'
                            }}
                            onMouseDown={(e) => e.currentTarget.style.cursor = 'grabbing'}
                            onMouseUp={(e) => e.currentTarget.style.cursor = 'grab'}
                          >
                            <div style={{ 
                              display: 'flex', 
                              alignItems: 'center',
                              marginBottom: '6px'
                            }}>
                              <GripVertical />
                            </div>
                            <div style={{ fontSize: '13px', color: '#333', lineHeight: '1.4' }}>
                              {option.text}
                            </div>
                          </div>
                        </React.Fragment>
                      );
                    })}
                  </div>
                </div>
              )}
            </div>

            {/* Navigation */}
            <div style={{ 
              display: 'flex', 
              flexDirection: isMobile ? 'column' : 'row',
              justifyContent: 'center', 
              gap: isMobile ? '10px' : '15px',
              marginTop: isMobile ? '25px' : '30px',
              flexWrap: 'wrap'
            }}>
              <button
                onClick={(e) => {
                  e.preventDefault();
                  if (currentPage !== 0) {
                    setCurrentPage(0);
                    setSelectedItem(null);
                    setShowOptions(false);
                  }
                }}
                style={{
                  padding: isMobile ? '12px 20px' : '12px 24px',
                  fontSize: isMobile ? '14px' : '15px',
                  background: currentPage === 0 ? '#BF9A4A' : '#5D1D2E',
                  color: '#fff',
                  border: 'none',
                  borderRadius: '8px',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  gap: '8px',
                  fontWeight: 'bold',
                  transition: 'all 0.3s',
                  opacity: currentPage === 0 ? 1 : 0.9,
                  flex: isMobile ? '1' : 'none',
                  minHeight: '48px',
                  touchAction: 'manipulation'
                }}
              >
                Introduction
              </button>
              <button
                onClick={(e) => {
                  e.preventDefault();
                  if (currentPage !== 1) {
                    setCurrentPage(1);
                    setSelectedItem(null);
                    setShowOptions(false);
                  }
                }}
                style={{
                  padding: isMobile ? '12px 20px' : '12px 24px',
                  fontSize: isMobile ? '14px' : '15px',
                  background: currentPage === 1 ? '#BF9A4A' : '#5D1D2E',
                  color: '#fff',
                  border: 'none',
                  borderRadius: '8px',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  gap: '8px',
                  fontWeight: 'bold',
                  transition: 'all 0.3s',
                  opacity: currentPage === 1 ? 1 : 0.9,
                  flex: isMobile ? '1' : 'none',
                  minHeight: '48px',
                  touchAction: 'manipulation'
                }}
              >
                Similarities
              </button>
              <button
                onClick={(e) => {
                  e.preventDefault();
                  if (currentPage !== 2) {
                    setCurrentPage(2);
                    setSelectedItem(null);
                    setShowOptions(false);
                  }
                }}
                style={{
                  padding: isMobile ? '12px 20px' : '12px 24px',
                  fontSize: isMobile ? '14px' : '15px',
                  background: currentPage === 2 ? '#BF9A4A' : '#5D1D2E',
                  color: '#fff',
                  border: 'none',
                  borderRadius: '8px',
                  cursor: 'pointer',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  gap: '8px',
                  fontWeight: 'bold',
                  transition: 'all 0.3s',
                  opacity: currentPage === 2 ? 1 : 0.9,
                  flex: isMobile ? '1' : 'none',
                  minHeight: '48px',
                  touchAction: 'manipulation'
                }}
              >
                Differences
              </button>
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<PlanningTemplate />);
  </script>
</body>
</html>
